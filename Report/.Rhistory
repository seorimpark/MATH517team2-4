knitr::opts_chunk$set(echo = TRUE)
options(knitr.duplicate.label = "allow")
data = read.csv("../Data/aircrafts_occurrences_merged.csv")
# Select needed variables
data = data[, c("localization", "fu", "country", "aerodrome", "origin_flight",
"destination_flight", "registration_country", "classification",
"registration", "manufacturer", "model", "operation_phase",
"damage_level", "type.of.occurrence", "occurrence_day", "time")]
data = read.csv("../Data/aircrafts_occurrences_merged.csv")
data[data$engines_amount==0,]
data[data$engines_amount==0,"model"]
knitr::opts_chunk$set(echo = TRUE)
options(knitr.duplicate.label = "allow")
# loading the data
#data=read.csv("~/Desktop/Github/SCV/SCV_project/MATH517team2-4/MATH517team2-4/Data/aircrafts_occurrences_merged.csv")
data = read.csv("../Data/aircrafts_occurrences_merged.csv")
#dealing with the NA
data_na_count<-data
data_na_count <- subset( data_na_count, select = -c("occurrence_day", "publication_day"  ) )
names(data_na_count)
data_na_count <- subset( data_na_count, select = c("occurrence_day", "publication_day") )
data_na_count <- subset( data_na_count, select = -c("occurrence_day", "publication_day") )
# loading the data
#data=read.csv("~/Desktop/Github/SCV/SCV_project/MATH517team2-4/MATH517team2-4/Data/aircrafts_occurrences_merged.csv")
data = read.csv("../Data/aircrafts_occurrences_merged.csv")
#dealing with the NA
data_na_count<-data
data_na_count <- subset( data_na_count, select = -c("occurrence_day", "publication_day") )
# loading the data
#data=read.csv("~/Desktop/Github/SCV/SCV_project/MATH517team2-4/MATH517team2-4/Data/aircrafts_occurrences_merged.csv")
data = read.csv("../Data/aircrafts_occurrences_merged.csv")
#dealing with the NA
data_na_count<-data
data_na_count <- subset(data_na_count, select = -c("occurrence_day", "publication_day"))
data_na_count <- subset(data_na_count, select = -c(occurrence_day, publication_day))
knitr::opts_chunk$set(echo = TRUE)
options(knitr.duplicate.label = "allow")
data <- read.csv("../Data/aircrafts_occurrences_merged.csv")
names(data)
dim(data)
#pie(data$type.of.occurrence)
barplot(table(data$type.of.occurrence))
takeoff <- c("TIRE BURST","LOAD LAUNCH","LEAVING THE TRACK")
during<- c("COLLISION AGAINST OBSTACLE DURING THE FLIGHT","ENGINE FAILURE DURING THE FLIGHT", "LOSS OF CONTROL IN THE AIR",
"FIRE DURING THE FLIGHT","METEOROLOGICAL PHENOMENOM IN THE AIR","AIR TRAFFIC","LOSS OF COMPONENT DURING THE FLIGHT",
"COLLISION AGAINST BIRD","ABOUT PASSENGERS/CREW DURING THE FLIGHT","AIRCRAFTS COLLISION IN THE AIR","SPATIAL UNAWARENESS",
"FLIGHT COMMANDS","COLLISION DURING THE FLIGHT AGAINST TOWED OBJECT","AIRCRAFT HIT BY OBJECT")
landing <-c("ABOUT LANDING GEAR","LANDING ON UNPREDICTABLE PLACE","EXPLOSIVE / NOT INTENTIONAL DECOMPRESSION","HARD LANDING","SLOW LANDING",
"LANDING WITHOUT LANDING GEAR" ,"LANDING BEFORE THE TRACK AREA")
ground <-c("METEOROLOGICAL PHENOMENOM ON THE GROUND","COLLISION AGAINST OBSTACLE ON THE GROUND","LOSS OF CONTROL ON THE GROUND",
"FIRE ON THE GROUND","COMPONENT LOSS ON THE GROUND","ENGINE FAILURE IN THE GROUND","VEHICLE COLLISION AGAINST AIRCRAFT",
"TERRAIN COLLISION")
unknown<- c("ABOUT ROTOR","FOD - DAMAGE CAUSED BY UNKNOWN OBJECT","SMOKE IN THE CABIN","LOW ALTITUDE MANEUVERS" ,"STRUCTURAL FAILURE",
"UNKNOWN","SYSTEM / COMPONENT FAILURE","ANOTHER TYPES","INVOLUNTARY ENGINE CUT OFF","ABOUT PROPELLER","FLUID LEAKS",
"FUEL STARVATION","PHYSIOLOGICAL PROBLEMS","TRACK INCURSION","ABOUT WINDOWS / DOORS / WINDSHIELD")
data_takeoff <- data[data$type.of.occurrence %in% takeoff,]
data_during <- data[data$type.of.occurrence %in% during,]
data_landing <- data[data$type.of.occurrence %in% landing,]
data_ground <- data[data$type.of.occurrence %in% ground,]
data_unknown <- data[data$type.of.occurrence %in% unknown,]
incident <- c("take off", "during the flight", "landing", "on the ground", "unknown")
dimension<- c(nrow(data_takeoff),nrow(data_during),nrow(data_landing),nrow(data_ground),nrow(data_unknown))
proportions <- data.frame(incident, dimension)
pie(proportions$dimension, labels = proportions$incident)
par(mfrow=c(2,3))
nb_accident = nrow (data_takeoff[data_takeoff$classification == "ACCIDENT",])
nb_serious = nrow (data_takeoff[data_takeoff$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round (label), "%", sep = ""), main = "Take off")
nb_accident = nrow (data_during[data_during$classification == "ACCIDENT",])
nb_serious = nrow (data_during[data_during$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""),  main = "During the flight")
nb_accident = nrow (data_landing[data_landing$classification == "ACCIDENT",])
nb_serious = nrow (data_landing[data_landing$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "Landing" )
nb_accident = nrow (data_ground[data_ground$classification == "ACCIDENT",])
nb_serious = nrow (data_ground[data_ground$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "On the ground")
nb_accident = nrow (data_unknown[data_unknown$classification == "ACCIDENT",])
nb_serious = nrow (data_unknown[data_unknown$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "Any time during the flight")
pie (c(1,0))
legend("right", legend = c("Accident", "Serious Incident"), fill = c("white", "cadetblue3"),title = "Classification", cex = 1.5)
library(ggplot2)
library(geobr)
library(geobr)
library(tidyr)
library(dplyr)
library(corrplot)
library(stargazer)
library(cowplot)
library(snakecase)
library(stringi)
library(stringr)
library(leaflet)
library(readr)
library(quantreg)
library(quantreg)
library(latex2exp)
library(lubridate)
library(knitr)
par(mfrow=c(2,3))
nb_accident = nrow (data_takeoff[data_takeoff$classification == "ACCIDENT",])
nb_serious = nrow (data_takeoff[data_takeoff$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round (label), "%", sep = ""), main = "Take off")
nb_accident = nrow (data_during[data_during$classification == "ACCIDENT",])
nb_serious = nrow (data_during[data_during$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""),  main = "During the flight")
nb_accident = nrow (data_landing[data_landing$classification == "ACCIDENT",])
nb_serious = nrow (data_landing[data_landing$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "Landing" )
nb_accident = nrow (data_ground[data_ground$classification == "ACCIDENT",])
nb_serious = nrow (data_ground[data_ground$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "On the ground")
nb_accident = nrow (data_unknown[data_unknown$classification == "ACCIDENT",])
nb_serious = nrow (data_unknown[data_unknown$classification=="SERIOUS INCIDENT",])
takeoffserverity = data.frame (c(nb_accident,nb_serious), c("ACCIDENT", "SERIOUS INCIDENT"))
label = c (nb_accident/(nb_accident+nb_serious)*100, nb_serious/(nb_accident+nb_serious)*100)
pie (takeoffserverity$c.nb_accident..nb_serious., labels = paste(round(label), "%", sep = ""), main = "Any time during the flight")
pie (c(1,0))
legend("right", legend = c("Accident", "Serious Incident"), fill = c("white", "cadetblue3"),title = "Classification", cex = 1.5)
par(mfrow=c(1,2))
data_accident = data[data$classification == "ACCIDENT",]
data_serious = data[data$classification == "SERIOUS INCIDENT",]
data_accident_takeoff=data_accident[data_accident$type.of.occurrence %in% takeoff,]
data_accident_during =data_accident[data_accident$type.of.occurrence %in% during,]
data_accident_landing=data_accident[data_accident$type.of.occurrence %in% landing,]
data_accident_ground=data_accident[data_accident$type.of.occurrence %in% ground,]
data_accident_unknown = data_accident[data_accident$type.of.occurrence %in% unknown,]
incident <- c("take off", "during the flight", "landing", "on the ground", "unknown")
dimension<- c(nrow(data_accident_takeoff),nrow(data_accident_during),nrow(data_accident_landing),nrow(data_accident_ground)
,nrow(data_accident_unknown))
proportions <- data.frame(incident, dimension)
pie(proportions$dimension, labels = incident, main = "Accident")
data_serious_takeoff=data_serious[data_serious$type.of.occurrence %in% takeoff,]
data_serious_during =data_serious[data_serious$type.of.occurrence %in% during,]
data_serious_landing=data_serious[data_serious$type.of.occurrence %in% landing,]
data_serious_ground=data_serious[data_serious$type.of.occurrence %in% ground,]
data_serious_unknown = data_serious[data_serious$type.of.occurrence %in% unknown,]
incident <- c("take off", "during the flight", "landing", "on the ground", "unknown")
dimension<- c(nrow(data_serious_takeoff),nrow(data_serious_during),nrow(data_serious_landing),nrow(data_serious_ground),
nrow(data_serious_unknown))
proportions <- data.frame(incident, dimension)
pie(proportions$dimension, labels = incident, main = "Serious Incident")
par(mfrow=c(1,2))
serious_destroyed = data_serious[data_serious$damage_level =="DESTROYED",]
serious_substantial = data_serious[data_serious$damage_level =="SUBSTANTIAL",]
serious_light = data_serious[data_serious$damage_level =="LIGHT",]
serious_none = data_serious[data_serious$damage_level == "NONE", ]
serious_unknown= data_serious[data_serious$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(serious_destroyed),nrow(serious_substantial),nrow(serious_light),nrow(serious_none),
nrow(serious_unknown))
proportions <- data.frame(incident, dimension)
pie(proportions$dimension, labels = incident,main = "Serious Incident")
accident_destroyed = data_accident[data_accident$damage_level =="DESTROYED",]
accident_substantial = data_accident[data_accident$damage_level =="SUBSTANTIAL",]
accident_light = data_accident[data_accident$damage_level =="LIGHT",]
accident_none = data_accident[data_accident$damage_level == "NONE", ]
accident_unknown= data_accident[data_accident$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(accident_destroyed),nrow(accident_substantial),nrow(accident_light),nrow(accident_none),
nrow(accident_unknown))
proportions <- data.frame(incident, dimension)
pie(proportions$dimension, labels = incident, main = "Accident")
par(mfrow=c(1,1))
serious_destroyed = data_serious[data_serious$damage_level =="DESTROYED",]
serious_substantial = data_serious[data_serious$damage_level =="SUBSTANTIAL",]
serious_light = data_serious[data_serious$damage_level =="LIGHT",]
serious_none = data_serious[data_serious$damage_level == "NONE", ]
serious_unknown= data_serious[data_serious$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(serious_destroyed),nrow(serious_substantial),nrow(serious_light),nrow(serious_none),
nrow(serious_unknown))
proportions <- data.frame(incident, dimension)
chart1 <- pie(proportions$dimension, labels = incident,main = "Serious Incident")
accident_destroyed = data_accident[data_accident$damage_level =="DESTROYED",]
accident_substantial = data_accident[data_accident$damage_level =="SUBSTANTIAL",]
accident_light = data_accident[data_accident$damage_level =="LIGHT",]
accident_none = data_accident[data_accident$damage_level == "NONE", ]
accident_unknown= data_accident[data_accident$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(accident_destroyed),nrow(accident_substantial),nrow(accident_light),nrow(accident_none),
nrow(accident_unknown))
proportions <- data.frame(incident, dimension)
chart2 <- pie(proportions$dimension, labels = incident, main = "Accident")
library(cowplot)
plot_grid(chart1, chart2)
par(mfrow=c(1,2))
serious_destroyed = data_serious[data_serious$damage_level =="DESTROYED",]
serious_substantial = data_serious[data_serious$damage_level =="SUBSTANTIAL",]
serious_light = data_serious[data_serious$damage_level =="LIGHT",]
serious_none = data_serious[data_serious$damage_level == "NONE", ]
serious_unknown= data_serious[data_serious$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(serious_destroyed),nrow(serious_substantial),nrow(serious_light),nrow(serious_none),
nrow(serious_unknown))
proportions <- data.frame(incident, dimension)
chart1 <- pie(proportions$dimension, labels = incident,main = "Serious Incident")
accident_destroyed = data_accident[data_accident$damage_level =="DESTROYED",]
accident_substantial = data_accident[data_accident$damage_level =="SUBSTANTIAL",]
accident_light = data_accident[data_accident$damage_level =="LIGHT",]
accident_none = data_accident[data_accident$damage_level == "NONE", ]
accident_unknown= data_accident[data_accident$damage_level == "UNKNOWN",]
incident <- c("DESTROYED", "SUBSTANTIAL", "LIGHT", "NONE", "UNKNOWN")
dimension<- c(nrow(accident_destroyed),nrow(accident_substantial),nrow(accident_light),nrow(accident_none),
nrow(accident_unknown))
proportions <- data.frame(incident, dimension)
chart2 <- pie(proportions$dimension, labels = incident, main = "Accident")
library(cowplot)
plot_grid(chart1, chart2)
